<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://local_server.com/UE/CH2_Creating%20Classes/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Chapter 2 : Creating UE Properties - Note_Site</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Chapter 2 : Creating UE Properties";
        var mkdocs_page_input_path = "UE/CH2_Creating Classes.md";
        var mkdocs_page_url = "/UE/CH2_Creating%20Classes/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Note_Site
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Readme/">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Section 1</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../C/C%2B%2B/basic/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../C/C%2B%2B/Compile/">Details</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Note_Site</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Chapter 2 : Creating UE Properties</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="chapter-2-creating-ue-properties">Chapter 2 : Creating UE Properties<a class="headerlink" href="#chapter-2-creating-ue-properties" title="Permanent link">&para;</a></h1>
<h2 id="1-creating-uclass">1. Creating UCLASS<a class="headerlink" href="#1-creating-uclass" title="Permanent link">&para;</a></h2>
<p>It's perfectally accaptable using naive C++ Object <strong>Class</strong> and <strong>new</strong> , <strong>delete</strong> operaters in UE Classes, 
but using <strong>UCLASS</strong> macro can utilize UE's build in smart pointer and garbage collection functions.
 * UE4 such as <strong>UPROPERTY</strong>, <strong>UFUNCTION</strong> and <strong>UCLASS</strong> will be generated after include the<br />
 &lt; UCLASSNAME &gt;.generate.h files<br />
 * It's important to noted that <strong>&lt; UCLASSNAME &gt;.genetate.h</strong> file must be included 
 as the last #include in the list of #include in <strong>UCLASS.h</strong>  </p>
<p>Here's a correct example</p>
<pre><code class="language-C++">#pragma once

#include &quot;CoreMinimal.h&quot;
#include &quot;UObject/NoExportTypes.h&quot;

//CORRECT, generated file is the last file included
#include &quot;UserProfile.generated.h&quot; 

UCLASS()
class XDD_API UUserProfile : public UObject
{
    GENERATED_BODY()

};

</code></pre>
<p>Several keywords can modify the way of <strong>UCALSS</strong> behaves
* Blueprintable : be able to construct a blueprint inside UE editor</p>
<pre><code class="language-c++">UCLASS(Blueprintable)
</code></pre>
<ul>
<li>BlueprintType : be able to use as a variable from blueprint</li>
</ul>
<pre><code class="language-c++">UCLASS(BlueprintType)
</code></pre>
<ul>
<li>NotBlueprintType : can not use this variable from blueprint</li>
</ul>
<pre><code class="language-c++">UCLASS(NotBlueprintType)
</code></pre>
<hr />
<h2 id="2-creating-uproperty">2. Creating UPROPERTY<a class="headerlink" href="#2-creating-uproperty" title="Permanent link">&para;</a></h2>
<p>A compelet document can be found in <a href="https://dev.epicgames.com/documentation/en-us/unreal-engine/unreal-engine-uproperties?application_version=5.3">here</a><br />
in <strong>UCLASS</strong>, Each <strong>UPROPERTY</strong> represent it can be a visual editable or blueprint-accessable
data member of the <strong>UCLASS</strong><br />
Examples such as <strong>EditAnywhere</strong>, <strong>BlueprintReadWrite</strong> can be added to each <strong>UPROPERTY</strong></p>
<pre><code class="language-c++">UCLASS(Blueprintable)
class example_API : public UObject
{
    GENERATE_BODY()
    public:
        UPROPERTY(EditAnyWhere, BlueprintReadWrite, Category = Stats)
        float Armor;

        UPROPERTY(EditAnyWhere, BlueprintReadWrite, Category = Stats)
        float HpMax;  
};
</code></pre>
<p>parameters can be passed to the <strong>UPROPERTY()</strong> macro, such as 
* <strong>EditAnywhere</strong> : the property can be edited every where obviously
* <strong>EditDefaultsOnly</strong> : Property can be changed only for blueprint before runtime(change default value)
* <strong>EditInstanceOnly</strong> : Property can be changed only for game-level instance of <strong>UCLASS</strong> object
* <strong>BlueprintReadWirte</strong> : Property can be both readable &amp; writable from blueprint diagram, <strong>notice</strong> that with <strong>BlueprintReadWrite</strong>, it must be a public member of class
* <strong>BlueprintReadOnly</strong> : The Property must be set from C++ and cannot be changed from the blueprints
* <strong>Category</strong> : It's recommended to always specify a <strong>Category</strong> for <strong>UPROPERTY( )</strong>, it determines which submenu the <strong>UPROPERTY( )</strong> will appear under in the property editor  </p>
<hr />
<p>## 3. Allocation
details can be found <a href="https://dev.epicgames.com/documentation/en-us/unreal-engine/typed-object-pointer-properties-in-unreal-engine?application_version=5.2">here</a>
 As reference before, we should not use <strong>new</strong> and <strong>delete</strong> for opject creation, instead, we use <strong>ConstructObject</strong> to instantiate object  </p>
<p><strong>UCLASS</strong> should be considered as resources to the C++ code, and their names should never hardcoded into the code base.</p>
<p>Therefore, we can declare an empty <strong>UCLASS</strong> reference in C++ code, then select it from blueprint dialog in UE editor.</p>
<pre><code class="language-C++">// in UCLASS  code section

//Display any UCLASSes deriving from UObject in a dropdown menu in Blueprints.
UPROPERTY(Editanywhere, BlueprintReadWrite, Category = Unit)
TSubclassOf&lt;UObject&gt; UClassOfPlayer;

//Displays string name of UCLASSes that derive from the GameMode C++ base class
UPROPERTY(EditAnywhere, meta = (MetaClass = &quot;GameMode&quot;), Category = Unit)
FstringClassReference UClassGameMode;
</code></pre>
<ul>
<li><strong>TSubclassOf&lt;&gt;</strong> : specify a <strong>UClass</strong> name using drop-down menu inside UE editor with related member.</li>
<li><strong>FStringClassReference</strong> :the <strong>MetaClass</strong> refer to the base C++ class, which limit the drop-down menu's content to only the blueprints derived from that C++ class.</li>
</ul>
<hr />
<h2 id="instantiating">Instantiating<a class="headerlink" href="#instantiating" title="Permanent link">&para;</a></h2>
<p>details can be found <a href="https://dev.epicgames.com/documentation/en-us/unreal-engine/creating-objects-in-unreal-engine?application_version=5.2">here</a><br />
Instantiating new instances of <strong>UObject</strong> typically use <strong>ConstructObject&lt;&gt;</strong> or <strong>NewObject&lt;&gt;</strong>,
it will need at least two info to work properly.
* <strong>UClass</strong> reference to which type you want to initiate
* Original C++ base class</p>
<p>for example, initiate the object using <strong>ConstructObject&lt; &gt;</strong> will looks like  </p>
<pre><code class="language-c++">ObjectType* object = ConstructObject&lt;ObjectType&gt;(UClassReference);
</code></pre>
<p><strong>NewObject&lt;&gt;</strong>  is simple, but need to pass a GetTransientPackage() with each call</p>
<pre><code class="language-c++">ObjectType* object = NewObject&lt;ObjectType&gt;(GetTransientPackage(), UClassReference);
</code></pre>
<hr />
<h2 id="destroying">Destroying<a class="headerlink" href="#destroying" title="Permanent link">&para;</a></h2>
<p>simply call <strong>ConditionalBeginDestroy()</strong> to begin teardown</p>
<pre><code class="language-c++">newobject-&gt;ConditionalBeginDestroy();
newobject = nullptr;
</code></pre>
<p>default garbage collection time can be found in <strong>BaseEngine.ini</strong><br />
we can trigger memory cleanup manually by calling </p>
<pre><code>GetWorld()-&gt;FroceGarbageCollection(true)
</code></pre>
<hr />
<h2 id="4-creating-structure">4. Creating Structure<a class="headerlink" href="#4-creating-structure" title="Permanent link">&para;</a></h2>
<p>A blueprint editable property in UE editor that contains multiple member, docs is <a href="https://dev.epicgames.com/documentation/en-us/unreal-engine/structs-in-unreal-engine?application_version=5.2">here</a></p>
<pre><code class="language-c++">USTRUCT([Specifier, Specifier, ...])
struct FStructName
{
    GENERATED_BODY()
};
</code></pre>
<hr />
<h2 id="5-creating-enum">5. Creating Enum<a class="headerlink" href="#5-creating-enum" title="Permanent link">&para;</a></h2>
<p>similar to USTRUCT</p>
<pre><code class="language-c++">UENUM([Specifier, Specifier, ...])
enum FEnumName
{
    enumMember1;
    enumMember2;
    enumMember3;
};
</code></pre>
<hr />
<h2 id="5-ufunction">5. UFUNCTION()<a class="headerlink" href="#5-ufunction" title="Permanent link">&para;</a></h2>
<p><code>UFUNCTION()</code> is a c++ function that is also callable with BluePrint, any c++ function can be marked as a <code>UFUNCTION()</code>  </p>
<p><a href="https://dev.epicgames.com/documentation/en-us/unreal-engine/ufunctions-in-unreal-engine?application_version=5.3">docs</a></p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
